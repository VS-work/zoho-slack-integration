sudo: required
services: docker
language: node_js
node_js: 
  - "stable"

cache:
  directories:
    - node_modules

stages:
- name: Precache
- name: Lint
- name: Deploy to Heroku


jobs:
  fast_finish: true
  include:
- stage: Precache
    script: true
    install: npm i
- stage: Lint
    skip_cleanup: true
    script: npm run lint  
- stage: Deploy to Heroku
    script: echo "npm test disabled"
  deploy:
    - provider: script
      script: ./deploy.sh
      skip_cleanup: true
      on:
        branch: master

